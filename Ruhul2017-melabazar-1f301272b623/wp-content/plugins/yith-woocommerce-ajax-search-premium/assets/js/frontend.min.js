jQuery(document).ready(function(f){var h=f(".yith-s"),k="undefined"!=typeof woocommerce_params&&"undefined"!=typeof woocommerce_params.ajax_loader_url?woocommerce_params.ajax_loader_url:yith_wcas_params.loading,m=""==h.data("loader-icon")?k:h.data("loader-icon"),k=f("#yith-searchsubmit"),n=h.data("min-chars");k.on("click",function(){return""==f(this).closest("form").find(".yith-s").val()?!1:!0});h.each(function(){var d=f(this),g=d.closest("form"),h=!1,c=g.find(".search_categories"),e=g.find(".yit_wcas_post_type"),
l=0<g.find('[name="lang"]').length?g.find('[name="lang"]').val():"",k="undefined"==typeof d.data("append-to")?d.closest(".yith-ajaxsearchform-container"):d.closest(d.data("append-to"));d.yithautocomplete({minChars:n,maxHeight:"auto",appendTo:k,triggerSelectOnValidInput:!1,serviceUrl:yith_wcas_params.ajax_url+"&post_type="+e.val()+"&lang="+l,onSearchStart:function(){d.css({"background-image":"url("+m+")","background-repeat":"no-repeat","background-position":"center right"})},onSearchComplete:function(){d.css("background-image",
"none")},onSelect:function(a){-1!=a.id&&(window.location.href=a.url)},beforeRender:function(){if("true"==yith_wcas_params.show_all&&h){var a={s:d.val(),post_type:g.find(".yit_wcas_post_type").val()};0<g.find(".search_categories").length&&(a.product_cat=g.find(".search_categories").val());var c=g.attr("action"),e=-1!==c.indexOf("?")?"&":"?",a='<div class="link-result"><a href="'+(c+e+f.param(a))+'">'+yith_wcas_params.show_all_text+"</a></div>";f(".autocomplete-suggestions").append(a)}},transformResult:function(a){a=
"string"===typeof a?f.parseJSON(a):a;h=a.results;return a},formatResult:function(a,d){var c="("+f.YithAutocomplete.utils.escapeRegExChars(d)+")",b="";"undefined"!==typeof a.img&&(b+=a.img);b=b+'<div class="yith_wcas_result_content"><div class="title">'+a.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>");b+="</div>";"undefined"!==typeof a.div_badge_open&&(b+=a.div_badge_open);"undefined"!==typeof a.on_sale&&(b+=a.on_sale);"undefined"!==typeof a.outofstock&&(b+=a.outofstock);"undefined"!==typeof a.featured&&
(b+=a.featured);"undefined"!==typeof a.div_badge_close&&(b+=a.div_badge_close);"undefined"!==typeof a.price&&""!=a.price&&(b+=" "+yith_wcas_params.price_label+" "+a.price);"undefined"!==typeof a.excerpt&&(b+=" "+a.excerpt.replace(new RegExp(c,"gi"),"<strong>$1</strong>"));return b+="</div>"}});if(c.length)c.on("change",function(a){a=d.yithautocomplete();""!=c.val()?a.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&product_cat="+c.val()+"&lang="+l}):a.setOptions({serviceUrl:yith_wcas_params.ajax_url+
"&lang="+l});a.hide();a.onValueChange()});e.length&&("any"==e.val()?c.attr("disabled","disabled"):c.removeAttr("disabled"),e.on("change",function(a){a=d.yithautocomplete();"any"==e.val()?c.attr("disabled","disabled"):c.removeAttr("disabled");""!=e.val()?a.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&post_type="+e.val()+"&lang="+l}):a.setOptions({serviceUrl:yith_wcas_params.ajax_url+"&lang="+l});a.hide();a.onValueChange()}))})});
